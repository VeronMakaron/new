<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Личный сайт студента GeekBrains</title>

<link href="css/style.css" rel="stylesheet" type="text/css" />

<script type="text/javascript">
	function checkAnswers(){
			
		function getRandomInt(min,max){
		    return Math.floor(Math.random()*(max-min+1))+min;
		}
		function getCard(){
		    var cards = [6,7,8,9,10,'J','Q','K','A'];
		    return cards[getRandomInt(0, cards.length - 1)];
		}
		var dealer = [getCard()];
		var player = [getCard(),getCard()];
		alert(' дилер: '+ dealer.join(' ') + ' игрок: ' + player.join(' '));

		function getSum(arr){ // считает карты последовательно
		        var arr1=(arr.concat());
		        var i=0;
		        var result=0;
		        for(i=0; i<arr1.length; i++){
		        	if (arr1[i]=='J'||arr1[i]=='Q'||arr1[i]=='K') { // замена букв на очки
		        		arr1[i] = 10;
		        	}
		        	if (arr1[i]=='A'&& result>10) {
		        		arr1[i] = 1;
		       		} else if (arr1[i]=='A'&& result<=10) {
		            arr1[i]=11;
		        	}
		        result = result + arr1[i];
		        }
		    return result;
		}

		var sum_dealer = getSum(dealer);
		var sum_player = getSum(player);
		function getStatus() {
		    return 'Дилер: ' + dealer.join(' ') +' очков: ' + sum_dealer + ' Игрок: ' + player.join(' ') + ' очков: '  + sum_player + '.'; 
		}
		alert (getStatus());
		if (sum_player == 21) {
		    alert(' Вы выйграли!');

		} else  do {
		            var answer = prompt(getStatus() + 'Хотите еще карту? 1-да, иначе-нет');

		            if (answer== '1') {
			            player.push(getCard());
			            sum_player = getSum(player);
			            alert(getStatus());
		        

		                if (sum_player>21) {
		                    alert(' Перебор. Выйграло казино ');
		                    break;
		                }
		                if (sum_player==21) {
		                    alert(' Вы выйграли!');
		                    break;
		                }
		            } else{ do{  dealer.push(getCard());
		                        sum_dealer = getSum(dealer);
		                    } while(sum_dealer<17 );
		                    alert(getStatus());

		                    if (sum_dealer>21) {
		                        alert('У дилера перебор. Вы выйграли!');
		                    }
		                    if (sum_player>sum_dealer){
		                        alert(' Вы выйграли!');
		                    }
		                    if (sum_player==sum_dealer){
		                        alert(' Ничья');
		                    }
		                    if (sum_dealer > sum_player) {
		                        alert(' Выйграло казино.');
		                    }
		                }
				} while(answer=='1');
		                

		        

	}


</script>>


</head>
<body>

<div id="tooplate_body_wrapper" />
<div id="tooplate_wrapper" />
<div id="tooplate_header">
	<div id="site_title">
		<h1><a href="http://geekbrains.ru">GeekBrains</a></h1>
	</div>
	<div id="tooplate_menu">
		<ul>
			<li><a href="index.html">Главная</a></li>
			<li><a href="puzzle.html">Загадки</a></li>
			<li><a href="guess.html">Угадайка</a></li>
			<li><a href="guessmulti.html">Угадайка мультиплеер</a></li>
			<li><a href="BlackJack.html">BlackJack</a></li>
		</ul>    	
	</div>
</div>
    
<div id="content_box">
		
	<div id="content_title">
		<h2>Игра в загадки</h2>
	</div>
	<div id="content">
		
		<h3>Игра Black Jack</h3>  

		<p> <p/>
		
		
		

		</br></br></br>

		<input type="button" value="Начать игру" onClick="checkAnswers()"/>

	</div>
           
    <div id="tooplate_footer">    
        Copyright © 2016 Veron
    </div>
    
</div> <!-- end of warpper -->

</body>
</html>